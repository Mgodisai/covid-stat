<div class="container mt-5">
   <div class="row justify-content-center">
      <div class="col-md-6">
         <h2 class="text-center mb-4">Login</h2>
         @if(errorMessage()) {
         <div class="alert alert-danger">
            {{ errorMessage() }}
         </div>
         }
         <form [formGroup]="loginData" (ngSubmit)="login()" novalidate>
            <div class="form-group">
               <label for="username">Username</label>
               <input
                  type="text"
                  id="username"
                  class="form-control"
                  formControlName="username"
                  [ngClass]="{
                     'is-invalid':
                        loginData.controls.username.invalid &&
                        (loginData.controls.username.touched ||
                           loginData.controls.username.dirty)
                  }"
               />
               @if(loginData.controls.username.invalid &&
               (loginData.controls.username.touched ||
               loginData.controls.username.dirty)) {
               <div class="invalid-feedback">
                  @if (loginData.controls.username.errors?.['required']) {
                  <div>Username is required</div>
                  }
               </div>
               }
            </div>

            <div class="form-group">
               <label for="password">Password</label>
               <input
                  type="password"
                  id="password"
                  class="form-control"
                  formControlName="password"
                  [ngClass]="{
                     'is-invalid':
                        loginData.controls.username.invalid &&
                        (loginData.controls.username.touched ||
                           loginData.controls.username.dirty)
                  }"
               />
               @if(loginData.controls.username.invalid &&
               (loginData.controls.username.touched ||
               loginData.controls.username.dirty)) {
               <div class="invalid-feedback">
                  @if(loginData.controls.password.errors?.['required']) {
                  <div>Password is required</div>
                  }
               </div>
               }
            </div>

            <button
               type="submit"
               [disabled]="loginData.invalid || isLoading()"
               class="btn btn-primary btn-block mt-4"
            >
               @if(isLoading()) {
               <span
                  class="spinner-border spinner-border-sm"
                  role="status"
                  aria-hidden="true"
               ></span>
               } @else { Login }
            </button>
         </form>
      </div>
   </div>
</div>
